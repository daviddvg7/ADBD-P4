-- MySQL Script generated by MySQL Workbench
-- vie 20 nov 2020 20:02:28 WET
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema catastros
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema catastros
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `catastros` DEFAULT CHARACTER SET utf8 ;
USE `catastros` ;

-- -----------------------------------------------------
-- Table `catastros`.`ZONA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `catastros`.`ZONA` ;

CREATE TABLE IF NOT EXISTS `catastros`.`ZONA` (
  `Nombre_Zona` VARCHAR(45) NOT NULL,
  `Ubicación` VARCHAR(45) NULL,
  `Concejal` VARCHAR(45) NULL,
  PRIMARY KEY (`Nombre_Zona`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `catastros`.`BLOQUE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `catastros`.`BLOQUE` ;

CREATE TABLE IF NOT EXISTS `catastros`.`BLOQUE` (
  `Número_Bloque` INT NOT NULL,
  `Calle_Bloque` VARCHAR(45) NOT NULL,
  `Año_Construcción` INT NULL,
  `Superficie` FLOAT NULL,
  `Número_Habitantes` INT NULL,
  `Nombre_Zona` VARCHAR(45) NULL,
  PRIMARY KEY (`Número_Bloque`),
  INDEX `Nombre_Zona_FK_idx` (`Nombre_Zona` ASC),
  UNIQUE INDEX `Calle_Bloque_UNIQUE` (`Calle_Bloque` ASC),
  CONSTRAINT `FK1`
    FOREIGN KEY (`Nombre_Zona`)
    REFERENCES `catastros`.`ZONA` (`Nombre_Zona`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `catastros`.`UNIFAMILIAR`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `catastros`.`UNIFAMILIAR` ;

CREATE TABLE IF NOT EXISTS `catastros`.`UNIFAMILIAR` (
  `Número_Unifamiliar` INT NOT NULL,
  `Calle_Unifamiliar` VARCHAR(45) NOT NULL,
  `Año_Construcción` INT NULL,
  `Superficie` FLOAT NULL,
  `Número_Habitantes` INT NULL,
  `Nombre_Zona` VARCHAR(45) NULL,
  PRIMARY KEY (`Número_Unifamiliar`),
  INDEX `Nombre_Zona_FK_idx` (`Nombre_Zona` ASC),
  UNIQUE INDEX `Calle_Unifamiliar_UNIQUE` (`Calle_Unifamiliar` ASC),
  CONSTRAINT `FK2`
    FOREIGN KEY (`Nombre_Zona`)
    REFERENCES `catastros`.`ZONA` (`Nombre_Zona`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `catastros`.`PISO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `catastros`.`PISO` ;

CREATE TABLE IF NOT EXISTS `catastros`.`PISO` (
  `Piso_Número_Piso` INT NOT NULL,
  `Letra_Piso` VARCHAR(1) NOT NULL,
  `Número_Bloque` INT NOT NULL,
  `Calle_Bloque` VARCHAR(45) NOT NULL,
  `Número_Habitantes` VARCHAR(45) NULL,
  PRIMARY KEY (`Piso_Número_Piso`),
  UNIQUE INDEX `Letra_Piso_UNIQUE` (`Letra_Piso` ASC),
  UNIQUE INDEX `Número_Bloque_UNIQUE` (`Número_Bloque` ASC),
  UNIQUE INDEX `Calle_Bloque_UNIQUE` (`Calle_Bloque` ASC),
  CONSTRAINT `FK8`
    FOREIGN KEY (`Número_Bloque`)
    REFERENCES `catastros`.`BLOQUE` (`Número_Bloque`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK11`
    FOREIGN KEY (`Calle_Bloque`)
    REFERENCES `catastros`.`BLOQUE` (`Calle_Bloque`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `catastros`.`PERSONA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `catastros`.`PERSONA` ;

CREATE TABLE IF NOT EXISTS `catastros`.`PERSONA` (
  `DNI` VARCHAR(10) NOT NULL,
  `Nombre` VARCHAR(45) NULL,
  `Teléfono` INT NULL,
  `Número_Unifamiliar` INT NULL,
  `Calle_Unifamiliar` VARCHAR(45) NULL,
  `Piso_Número_Piso` INT NULL,
  `Letra_Piso` VARCHAR(1) NULL,
  `Número_Bloque` INT NULL,
  `Calle_Bloque` VARCHAR(45) NULL,
  `Cabeza_Familia` VARCHAR(45) NULL,
  PRIMARY KEY (`DNI`),
  INDEX `Número_Unifamiliar_idx` (`Número_Unifamiliar` ASC),
  INDEX `Piso_Número_Piso_idx` (`Piso_Número_Piso` ASC),
  INDEX `Cabeza_Familia_idx` (`Cabeza_Familia` ASC),
  INDEX `FK13_idx` (`Calle_Unifamiliar` ASC),
  INDEX `FK17_idx` (`Letra_Piso` ASC),
  INDEX `FK18_idx` (`Número_Bloque` ASC),
  INDEX `FK19_idx` (`Calle_Bloque` ASC),
  CONSTRAINT `FK5`
    FOREIGN KEY (`Número_Unifamiliar`)
    REFERENCES `catastros`.`UNIFAMILIAR` (`Número_Unifamiliar`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK6`
    FOREIGN KEY (`Piso_Número_Piso`)
    REFERENCES `catastros`.`PISO` (`Piso_Número_Piso`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK7`
    FOREIGN KEY (`Cabeza_Familia`)
    REFERENCES `catastros`.`PERSONA` (`DNI`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK13`
    FOREIGN KEY (`Calle_Unifamiliar`)
    REFERENCES `catastros`.`UNIFAMILIAR` (`Calle_Unifamiliar`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK17`
    FOREIGN KEY (`Letra_Piso`)
    REFERENCES `catastros`.`PISO` (`Letra_Piso`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK18`
    FOREIGN KEY (`Número_Bloque`)
    REFERENCES `catastros`.`PISO` (`Número_Bloque`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK19`
    FOREIGN KEY (`Calle_Bloque`)
    REFERENCES `catastros`.`PISO` (`Calle_Bloque`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `catastros`.`PERSONAPOSEEUNIFAMILIAR`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `catastros`.`PERSONAPOSEEUNIFAMILIAR` ;

CREATE TABLE IF NOT EXISTS `catastros`.`PERSONAPOSEEUNIFAMILIAR` (
  `DNI` VARCHAR(10) NOT NULL,
  `Número_Unifamiliar` INT NOT NULL,
  `Calle_Unifamiliar` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`DNI`, `Número_Unifamiliar`, `Calle_Unifamiliar`),
  INDEX `Número_Unifamiliar_idx` (`Número_Unifamiliar` ASC),
  INDEX `FK12_idx` (`Calle_Unifamiliar` ASC),
  CONSTRAINT `FK3`
    FOREIGN KEY (`DNI`)
    REFERENCES `catastros`.`PERSONA` (`DNI`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK4`
    FOREIGN KEY (`Número_Unifamiliar`)
    REFERENCES `catastros`.`UNIFAMILIAR` (`Número_Unifamiliar`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK12`
    FOREIGN KEY (`Calle_Unifamiliar`)
    REFERENCES `catastros`.`UNIFAMILIAR` (`Calle_Unifamiliar`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `catastros`.`PERSONAPOSEEPISO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `catastros`.`PERSONAPOSEEPISO` ;

CREATE TABLE IF NOT EXISTS `catastros`.`PERSONAPOSEEPISO` (
  `DNI` VARCHAR(10) NOT NULL,
  `Piso_Número_Piso` INT NOT NULL,
  `Letra_Piso` VARCHAR(1) NOT NULL,
  `Número_Bloque` INT NOT NULL,
  `Calle_Bloque` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`Piso_Número_Piso`, `Letra_Piso`, `Número_Bloque`, `Calle_Bloque`, `DNI`),
  INDEX `Piso_Número_Piso_idx` (`Piso_Número_Piso` ASC),
  INDEX `FK14_idx` (`Letra_Piso` ASC),
  INDEX `FK15_idx` (`Número_Bloque` ASC),
  INDEX `FK16_idx` (`Calle_Bloque` ASC),
  UNIQUE INDEX `DNI_UNIQUE` (`DNI` ASC),
  CONSTRAINT `FK9`
    FOREIGN KEY (`DNI`)
    REFERENCES `catastros`.`PERSONA` (`DNI`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK10`
    FOREIGN KEY (`Piso_Número_Piso`)
    REFERENCES `catastros`.`PISO` (`Piso_Número_Piso`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK14`
    FOREIGN KEY (`Letra_Piso`)
    REFERENCES `catastros`.`PISO` (`Letra_Piso`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK15`
    FOREIGN KEY (`Número_Bloque`)
    REFERENCES `catastros`.`PISO` (`Número_Bloque`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK16`
    FOREIGN KEY (`Calle_Bloque`)
    REFERENCES `catastros`.`PISO` (`Calle_Bloque`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `catastros`.`ZONA`
-- -----------------------------------------------------
START TRANSACTION;
USE `catastros`;
INSERT INTO `catastros`.`ZONA` (`Nombre_Zona`, `Ubicación`, `Concejal`) VALUES ('Barrio La Salud', 'Santa Cruz', 'Pedro');
INSERT INTO `catastros`.`ZONA` (`Nombre_Zona`, `Ubicación`, `Concejal`) VALUES ('Ofra', 'Santa Cruz', 'Alberto');
INSERT INTO `catastros`.`ZONA` (`Nombre_Zona`, `Ubicación`, `Concejal`) VALUES ('San Benito', 'La Laguna', 'Tomás');

COMMIT;


-- -----------------------------------------------------
-- Data for table `catastros`.`BLOQUE`
-- -----------------------------------------------------
START TRANSACTION;
USE `catastros`;
INSERT INTO `catastros`.`BLOQUE` (`Número_Bloque`, `Calle_Bloque`, `Año_Construcción`, `Superficie`, `Número_Habitantes`, `Nombre_Zona`) VALUES (1, 'Rosalia de Castro', 1998, 300, 100, 'Ofra');
INSERT INTO `catastros`.`BLOQUE` (`Número_Bloque`, `Calle_Bloque`, `Año_Construcción`, `Superficie`, `Número_Habitantes`, `Nombre_Zona`) VALUES (27, 'Calle Alameda', 1946, 150, 29, 'Barrio La Salud');
INSERT INTO `catastros`.`BLOQUE` (`Número_Bloque`, `Calle_Bloque`, `Año_Construcción`, `Superficie`, `Número_Habitantes`, `Nombre_Zona`) VALUES (15, 'Herradores', 1923, 200, 67, 'San Benito');

COMMIT;


-- -----------------------------------------------------
-- Data for table `catastros`.`UNIFAMILIAR`
-- -----------------------------------------------------
START TRANSACTION;
USE `catastros`;
INSERT INTO `catastros`.`UNIFAMILIAR` (`Número_Unifamiliar`, `Calle_Unifamiliar`, `Año_Construcción`, `Superficie`, `Número_Habitantes`, `Nombre_Zona`) VALUES (13, 'Rosalia de Castro', 1978, 128, 4, 'Ofra');
INSERT INTO `catastros`.`UNIFAMILIAR` (`Número_Unifamiliar`, `Calle_Unifamiliar`, `Año_Construcción`, `Superficie`, `Número_Habitantes`, `Nombre_Zona`) VALUES (45, 'Calle Alameda', 1765, 90, 2, 'Barrio La Salud');
INSERT INTO `catastros`.`UNIFAMILIAR` (`Número_Unifamiliar`, `Calle_Unifamiliar`, `Año_Construcción`, `Superficie`, `Número_Habitantes`, `Nombre_Zona`) VALUES (123, 'Herradores', 1935, 200, 6, 'San Benito');

COMMIT;


-- -----------------------------------------------------
-- Data for table `catastros`.`PISO`
-- -----------------------------------------------------
START TRANSACTION;
USE `catastros`;
INSERT INTO `catastros`.`PISO` (`Piso_Número_Piso`, `Letra_Piso`, `Número_Bloque`, `Calle_Bloque`, `Número_Habitantes`) VALUES (2, 'A', 1, 'Rosalía de Castro', '3');
INSERT INTO `catastros`.`PISO` (`Piso_Número_Piso`, `Letra_Piso`, `Número_Bloque`, `Calle_Bloque`, `Número_Habitantes`) VALUES (4, 'C', 15, 'Herradores', '2');
INSERT INTO `catastros`.`PISO` (`Piso_Número_Piso`, `Letra_Piso`, `Número_Bloque`, `Calle_Bloque`, `Número_Habitantes`) VALUES (1, 'B', 27, 'Calle Alameda', '3');

COMMIT;


-- -----------------------------------------------------
-- Data for table `catastros`.`PERSONA`
-- -----------------------------------------------------
START TRANSACTION;
USE `catastros`;
INSERT INTO `catastros`.`PERSONA` (`DNI`, `Nombre`, `Teléfono`, `Número_Unifamiliar`, `Calle_Unifamiliar`, `Piso_Número_Piso`, `Letra_Piso`, `Número_Bloque`, `Calle_Bloque`, `Cabeza_Familia`) VALUES ('98765432B', 'Juan', 601354675, 45, 'Calle Alameda', NULL, NULL, NULL, NULL, '98765432B');
INSERT INTO `catastros`.`PERSONA` (`DNI`, `Nombre`, `Teléfono`, `Número_Unifamiliar`, `Calle_Unifamiliar`, `Piso_Número_Piso`, `Letra_Piso`, `Número_Bloque`, `Calle_Bloque`, `Cabeza_Familia`) VALUES ('10293847C', 'Pedro', 678927364, 123, 'Herradores', NULL, NULL, NULL, NULL, '10293847C');
INSERT INTO `catastros`.`PERSONA` (`DNI`, `Nombre`, `Teléfono`, `Número_Unifamiliar`, `Calle_Unifamiliar`, `Piso_Número_Piso`, `Letra_Piso`, `Número_Bloque`, `Calle_Bloque`, `Cabeza_Familia`) VALUES ('12345678A', 'David', 666079337, 13, 'Rosalia de Castro', NULL, NULL, NULL, NULL, '12345678A');
INSERT INTO `catastros`.`PERSONA` (`DNI`, `Nombre`, `Teléfono`, `Número_Unifamiliar`, `Calle_Unifamiliar`, `Piso_Número_Piso`, `Letra_Piso`, `Número_Bloque`, `Calle_Bloque`, `Cabeza_Familia`) VALUES ('12983476Y', 'Luis', 922784625, 13, 'Rosalia de Castro', NULL, NULL, NULL, NULL, '12345678A');
INSERT INTO `catastros`.`PERSONA` (`DNI`, `Nombre`, `Teléfono`, `Número_Unifamiliar`, `Calle_Unifamiliar`, `Piso_Número_Piso`, `Letra_Piso`, `Número_Bloque`, `Calle_Bloque`, `Cabeza_Familia`) VALUES ('01928374D', 'Lucas', 920649383, NULL, NULL, 2, 'A', 1, 'Rosalia de Castro', '01928374D');

COMMIT;


-- -----------------------------------------------------
-- Data for table `catastros`.`PERSONAPOSEEUNIFAMILIAR`
-- -----------------------------------------------------
START TRANSACTION;
USE `catastros`;
INSERT INTO `catastros`.`PERSONAPOSEEUNIFAMILIAR` (`DNI`, `Número_Unifamiliar`, `Calle_Unifamiliar`) VALUES ('12345678A', 13, 'Rosalia de Castro');

COMMIT;


-- -----------------------------------------------------
-- Data for table `catastros`.`PERSONAPOSEEPISO`
-- -----------------------------------------------------
START TRANSACTION;
USE `catastros`;
INSERT INTO `catastros`.`PERSONAPOSEEPISO` (`DNI`, `Piso_Número_Piso`, `Letra_Piso`, `Número_Bloque`, `Calle_Bloque`) VALUES ('01928374D', 2, 'A', 1, 'Rosalia de Castro');

COMMIT;

