-- MySQL Script generated by MySQL Workbench
-- sáb 21 nov 2020 20:01:59 WET
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema viveros
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema viveros
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `viveros` DEFAULT CHARACTER SET utf8 ;
USE `viveros` ;

-- -----------------------------------------------------
-- Table `viveros`.`VIVERO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `viveros`.`VIVERO` ;

CREATE TABLE IF NOT EXISTS `viveros`.`VIVERO` (
  `Ubicacion` VARCHAR(45) NOT NULL,
  `Nombre` VARCHAR(45) NULL,
  `Hora_Apertura` VARCHAR(45) NULL,
  `Hora_Cierre` VARCHAR(45) NULL,
  PRIMARY KEY (`Ubicacion`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `viveros`.`ZONAS`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `viveros`.`ZONAS` ;

CREATE TABLE IF NOT EXISTS `viveros`.`ZONAS` (
  `Cod_Zona` INT NOT NULL,
  `Ubicacion` VARCHAR(45) NULL,
  `Nombre` VARCHAR(45) NULL,
  PRIMARY KEY (`Cod_Zona`),
  INDEX `FK_idx` (`Ubicacion` ASC),
  CONSTRAINT `FKUbicacion`
    FOREIGN KEY (`Ubicacion`)
    REFERENCES `viveros`.`VIVERO` (`Ubicacion`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `viveros`.`EMPLEADO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `viveros`.`EMPLEADO` ;

CREATE TABLE IF NOT EXISTS `viveros`.`EMPLEADO` (
  `DNI` VARCHAR(10) NOT NULL,
  `Seguridad_Social` VARCHAR(45) NOT NULL,
  `Nombre_Completo` VARCHAR(45) NULL,
  `Sueldo` INT NULL,
  PRIMARY KEY (`DNI`),
  UNIQUE INDEX `Seguridad_Social_UNIQUE` (`Seguridad_Social` ASC))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `viveros`.`PRODUCTO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `viveros`.`PRODUCTO` ;

CREATE TABLE IF NOT EXISTS `viveros`.`PRODUCTO` (
  `Codigo_Barras` INT NOT NULL,
  `Nombre_Producto` VARCHAR(45) NULL,
  `Tipo_Producto` VARCHAR(45) NULL,
  `Precio` FLOAT NULL,
  `Stock` INT NULL,
  `Fecha_Caducidad` VARCHAR(45) NULL,
  PRIMARY KEY (`Codigo_Barras`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `viveros`.`EMPLEADOZONA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `viveros`.`EMPLEADOZONA` ;

CREATE TABLE IF NOT EXISTS `viveros`.`EMPLEADOZONA` (
  `DNI` VARCHAR(10) NOT NULL,
  `Fecha_Inicio` VARCHAR(45) NOT NULL,
  `Cod_Zona` INT NULL,
  PRIMARY KEY (`DNI`, `Fecha_Inicio`),
  INDEX `FK2_idx` (`Cod_Zona` ASC),
  CONSTRAINT `FK7`
    FOREIGN KEY (`DNI`)
    REFERENCES `viveros`.`EMPLEADO` (`DNI`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK8`
    FOREIGN KEY (`Cod_Zona`)
    REFERENCES `viveros`.`ZONAS` (`Cod_Zona`)
    ON DELETE SET NULL
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `viveros`.`CLIENTE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `viveros`.`CLIENTE` ;

CREATE TABLE IF NOT EXISTS `viveros`.`CLIENTE` (
  `DNI_Cliente` VARCHAR(45) NOT NULL,
  `Nombre` VARCHAR(45) NULL,
  `Bonificacion` FLOAT NULL,
  `Metodo_Pago` VARCHAR(45) NULL,
  `Gasto_Mensual` FLOAT NULL,
  `Email` VARCHAR(45) NULL,
  PRIMARY KEY (`DNI_Cliente`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `viveros`.`PEDIDO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `viveros`.`PEDIDO` ;

CREATE TABLE IF NOT EXISTS `viveros`.`PEDIDO` (
  `Cod_Pedido` INT NOT NULL,
  `Fecha` VARCHAR(45) NULL,
  `Importe` FLOAT NULL,
  `DNI_Empleado` VARCHAR(10) NULL,
  `DNI_Cliente` VARCHAR(10) NULL,
  PRIMARY KEY (`Cod_Pedido`),
  INDEX `FK1_idx` (`DNI_Empleado` ASC),
  INDEX `FK2_idx` (`DNI_Cliente` ASC),
  CONSTRAINT `FK5`
    FOREIGN KEY (`DNI_Empleado`)
    REFERENCES `viveros`.`EMPLEADO` (`DNI`)
    ON DELETE SET NULL
    ON UPDATE CASCADE,
  CONSTRAINT `FK6`
    FOREIGN KEY (`DNI_Cliente`)
    REFERENCES `viveros`.`CLIENTE` (`DNI_Cliente`)
    ON DELETE SET NULL
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `viveros`.`PRODUCTOPEDIDO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `viveros`.`PRODUCTOPEDIDO` ;

CREATE TABLE IF NOT EXISTS `viveros`.`PRODUCTOPEDIDO` (
  `Codigo_Barras` INT NOT NULL,
  `Cod_Pedido` INT NOT NULL,
  `Cantidad` INT NOT NULL,
  PRIMARY KEY (`Codigo_Barras`, `Cod_Pedido`),
  INDEX `FK1_idx` (`Cod_Pedido` ASC),
  CONSTRAINT `FK3`
    FOREIGN KEY (`Codigo_Barras`)
    REFERENCES `viveros`.`PRODUCTO` (`Codigo_Barras`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK4`
    FOREIGN KEY (`Cod_Pedido`)
    REFERENCES `viveros`.`PEDIDO` (`Cod_Pedido`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `viveros`.`ZONAPRODUCTO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `viveros`.`ZONAPRODUCTO` ;

CREATE TABLE IF NOT EXISTS `viveros`.`ZONAPRODUCTO` (
  `Cod_Zona` INT NOT NULL,
  `Codigo_Barras` INT NOT NULL,
  PRIMARY KEY (`Cod_Zona`, `Codigo_Barras`),
  INDEX `FK1_idx` (`Codigo_Barras` ASC),
  CONSTRAINT `FK1`
    FOREIGN KEY (`Codigo_Barras`)
    REFERENCES `viveros`.`PRODUCTO` (`Codigo_Barras`)
    ON DELETE CASCADE
    ON UPDATE CASCADE,
  CONSTRAINT `FK2`
    FOREIGN KEY (`Cod_Zona`)
    REFERENCES `viveros`.`ZONAS` (`Cod_Zona`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `viveros`.`VIVERO`
-- -----------------------------------------------------
START TRANSACTION;
USE `viveros`;
INSERT INTO `viveros`.`VIVERO` (`Ubicacion`, `Nombre`, `Hora_Apertura`, `Hora_Cierre`) VALUES ('Garachico', 'Vivero1', '10:00', '18:00');
INSERT INTO `viveros`.`VIVERO` (`Ubicacion`, `Nombre`, `Hora_Apertura`, `Hora_Cierre`) VALUES ('Tacoronte', 'Vivero2', '9:00', '21:00');
INSERT INTO `viveros`.`VIVERO` (`Ubicacion`, `Nombre`, `Hora_Apertura`, `Hora_Cierre`) VALUES ('Arico', 'Vivero3', '11:00', '20:30');

COMMIT;


-- -----------------------------------------------------
-- Data for table `viveros`.`ZONAS`
-- -----------------------------------------------------
START TRANSACTION;
USE `viveros`;
INSERT INTO `viveros`.`ZONAS` (`Cod_Zona`, `Ubicacion`, `Nombre`) VALUES (111, 'Garachico', 'Jardinería');
INSERT INTO `viveros`.`ZONAS` (`Cod_Zona`, `Ubicacion`, `Nombre`) VALUES (112, 'Garachico', 'Cajas');
INSERT INTO `viveros`.`ZONAS` (`Cod_Zona`, `Ubicacion`, `Nombre`) VALUES (221, 'Tacoronte', 'Herramientas');
INSERT INTO `viveros`.`ZONAS` (`Cod_Zona`, `Ubicacion`, `Nombre`) VALUES (222, 'Tacoronte', 'Jardinería');
INSERT INTO `viveros`.`ZONAS` (`Cod_Zona`, `Ubicacion`, `Nombre`) VALUES (223, 'Tacoronte', 'Cajas');
INSERT INTO `viveros`.`ZONAS` (`Cod_Zona`, `Ubicacion`, `Nombre`) VALUES (331, 'Arico', 'Cajas');

COMMIT;


-- -----------------------------------------------------
-- Data for table `viveros`.`EMPLEADO`
-- -----------------------------------------------------
START TRANSACTION;
USE `viveros`;
INSERT INTO `viveros`.`EMPLEADO` (`DNI`, `Seguridad_Social`, `Nombre_Completo`, `Sueldo`) VALUES ('123456789A', '123456789', 'David Valverde', 3000);
INSERT INTO `viveros`.`EMPLEADO` (`DNI`, `Seguridad_Social`, `Nombre_Completo`, `Sueldo`) VALUES ('987654321B', '987654321', 'Luis González', 1500);
INSERT INTO `viveros`.`EMPLEADO` (`DNI`, `Seguridad_Social`, `Nombre_Completo`, `Sueldo`) VALUES ('213465789Z', '987876564', 'Rafael Cala', 2500);

COMMIT;


-- -----------------------------------------------------
-- Data for table `viveros`.`PRODUCTO`
-- -----------------------------------------------------
START TRANSACTION;
USE `viveros`;
INSERT INTO `viveros`.`PRODUCTO` (`Codigo_Barras`, `Nombre_Producto`, `Tipo_Producto`, `Precio`, `Stock`, `Fecha_Caducidad`) VALUES (1111, 'Tijeras de Poda', 'Herramienta', 20.00, 27, '');
INSERT INTO `viveros`.`PRODUCTO` (`Codigo_Barras`, `Nombre_Producto`, `Tipo_Producto`, `Precio`, `Stock`, `Fecha_Caducidad`) VALUES (2222, 'Fertilizante', 'Jardinería', 34.99, 15, '04/21');
INSERT INTO `viveros`.`PRODUCTO` (`Codigo_Barras`, `Nombre_Producto`, `Tipo_Producto`, `Precio`, `Stock`, `Fecha_Caducidad`) VALUES (3333, 'Macetas', 'Jardinería', 9.99, 50, '');

COMMIT;


-- -----------------------------------------------------
-- Data for table `viveros`.`EMPLEADOZONA`
-- -----------------------------------------------------
START TRANSACTION;
USE `viveros`;
INSERT INTO `viveros`.`EMPLEADOZONA` (`DNI`, `Fecha_Inicio`, `Cod_Zona`) VALUES ('123456789A', '20/10', 111);
INSERT INTO `viveros`.`EMPLEADOZONA` (`DNI`, `Fecha_Inicio`, `Cod_Zona`) VALUES ('123456789A', '10/11', 112);
INSERT INTO `viveros`.`EMPLEADOZONA` (`DNI`, `Fecha_Inicio`, `Cod_Zona`) VALUES ('987654321B', '7/3', 221);
INSERT INTO `viveros`.`EMPLEADOZONA` (`DNI`, `Fecha_Inicio`, `Cod_Zona`) VALUES ('987654321B', '29/9', 221);
INSERT INTO `viveros`.`EMPLEADOZONA` (`DNI`, `Fecha_Inicio`, `Cod_Zona`) VALUES ('213465789Z', '14/12', 331);

COMMIT;


-- -----------------------------------------------------
-- Data for table `viveros`.`CLIENTE`
-- -----------------------------------------------------
START TRANSACTION;
USE `viveros`;
INSERT INTO `viveros`.`CLIENTE` (`DNI_Cliente`, `Nombre`, `Bonificacion`, `Metodo_Pago`, `Gasto_Mensual`, `Email`) VALUES ('132457689O', 'Pedro', 15, 'Efectivo', 150.00, 'pedro123@ull.es');
INSERT INTO `viveros`.`CLIENTE` (`DNI_Cliente`, `Nombre`, `Bonificacion`, `Metodo_Pago`, `Gasto_Mensual`, `Email`) VALUES ('102938475F', 'Juan', 30, 'Tarjeta', 350.00, 'juanito@edu.es');
INSERT INTO `viveros`.`CLIENTE` (`DNI_Cliente`, `Nombre`, `Bonificacion`, `Metodo_Pago`, `Gasto_Mensual`, `Email`) VALUES ('019283746G', 'Lucas', 10, 'Tarjeta', 50.00, 'lucasss@ull.edu.es');

COMMIT;


-- -----------------------------------------------------
-- Data for table `viveros`.`PEDIDO`
-- -----------------------------------------------------
START TRANSACTION;
USE `viveros`;
INSERT INTO `viveros`.`PEDIDO` (`Cod_Pedido`, `Fecha`, `Importe`, `DNI_Empleado`, `DNI_Cliente`) VALUES (1, '20/4', 57.99, '123456789A', '132457689O');
INSERT INTO `viveros`.`PEDIDO` (`Cod_Pedido`, `Fecha`, `Importe`, `DNI_Empleado`, `DNI_Cliente`) VALUES (2, '17/7', 124.45, '987654321B', '102938475F');
INSERT INTO `viveros`.`PEDIDO` (`Cod_Pedido`, `Fecha`, `Importe`, `DNI_Empleado`, `DNI_Cliente`) VALUES (3, '14/12', 17.95, '213465789Z', '019283746G');

COMMIT;


-- -----------------------------------------------------
-- Data for table `viveros`.`PRODUCTOPEDIDO`
-- -----------------------------------------------------
START TRANSACTION;
USE `viveros`;
INSERT INTO `viveros`.`PRODUCTOPEDIDO` (`Codigo_Barras`, `Cod_Pedido`, `Cantidad`) VALUES (1111, 1, 2);
INSERT INTO `viveros`.`PRODUCTOPEDIDO` (`Codigo_Barras`, `Cod_Pedido`, `Cantidad`) VALUES (2222, 1, 3);
INSERT INTO `viveros`.`PRODUCTOPEDIDO` (`Codigo_Barras`, `Cod_Pedido`, `Cantidad`) VALUES (1111, 2, 1);
INSERT INTO `viveros`.`PRODUCTOPEDIDO` (`Codigo_Barras`, `Cod_Pedido`, `Cantidad`) VALUES (3333, 2, 3);
INSERT INTO `viveros`.`PRODUCTOPEDIDO` (`Codigo_Barras`, `Cod_Pedido`, `Cantidad`) VALUES (2222, 3, 1);
INSERT INTO `viveros`.`PRODUCTOPEDIDO` (`Codigo_Barras`, `Cod_Pedido`, `Cantidad`) VALUES (3333, 3, 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `viveros`.`ZONAPRODUCTO`
-- -----------------------------------------------------
START TRANSACTION;
USE `viveros`;
INSERT INTO `viveros`.`ZONAPRODUCTO` (`Cod_Zona`, `Codigo_Barras`) VALUES (221, 1111);
INSERT INTO `viveros`.`ZONAPRODUCTO` (`Cod_Zona`, `Codigo_Barras`) VALUES (111, 2222);
INSERT INTO `viveros`.`ZONAPRODUCTO` (`Cod_Zona`, `Codigo_Barras`) VALUES (222, 2222);
INSERT INTO `viveros`.`ZONAPRODUCTO` (`Cod_Zona`, `Codigo_Barras`) VALUES (112, 3333);
INSERT INTO `viveros`.`ZONAPRODUCTO` (`Cod_Zona`, `Codigo_Barras`) VALUES (223, 3333);
INSERT INTO `viveros`.`ZONAPRODUCTO` (`Cod_Zona`, `Codigo_Barras`) VALUES (331, 3333);

COMMIT;

